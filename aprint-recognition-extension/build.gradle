

// Apply the java plugin to add support for Java
apply plugin: 'java'
apply plugin: 'eclipse'

sourceSets {
    main {
        java {
            srcDir 'src/main/java'
        }
	 	resources {
		    srcDir 'src/main/java'
		    files('src/**/*.properties')
		}
    }
}

configurations.all {
	resolutionStrategy.cacheChangingModulesFor 365, 'days'
	resolutionStrategy.cacheDynamicVersionsFor 365, 'days'
}
// In this section you declare where to find the dependencies of your project
repositories {
    // Use 'jcenter' for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
	   jcenter()
	   mavenCentral()
	   mavenLocal()
	   flatDir {
	       dirs 'depends'
	   }
	   
	   maven {
		   url "http://maven.imagej.net/content/repositories/releases"
	   }
	   maven {
		   
		   url 'http://maven.imagej.net/content/groups/public'
	   }
 

}


// In this section you declare the dependencies for your production and test code
dependencies {
    compile project(':aprint-gui')
	
	testCompile name:'junit', group:'junit', version:'3.8'
//    compile name: 'Jama-1.0.3'
	compile name: 'Gray_Morphology-2.3.2'
    compile name: 'Trainable_Segmentation', group:'sc.fiji', version:'2.1.7-PF-PATCH' 
}



task fatJar(type: Jar, dependsOn: jar) {
  baseName = project.name + '-all'
  extension="extension"
  def conf = configurations.runtime
  def l = conf.findAll { !it.name.startsWith("APrint.jar") }
  def deps = l.collect { it.isDirectory() ? it : zipTree(it) }
  from(deps) { 
    exclude 'META-INF/MANIFEST.MF'
	exclude 'META-INF/*.RSA'
	exclude 'META-INF/*.PF'
  } with jar



}

